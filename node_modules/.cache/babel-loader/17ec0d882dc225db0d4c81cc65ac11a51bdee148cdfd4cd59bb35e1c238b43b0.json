{"ast":null,"code":"var _jsxFileName = \"/home/sysop/capstone/src/MainMenu/Shopping/Payment.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"./ShoppingCss/PaymentScreen.css\";\nimport creditCardIcon from \"../Shopping/images/credit_card.png\"; // 아이콘 경로\nimport cashIcon from \"../Shopping/images/cash.png\"; // 아이콘 경로\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Payment({\n  totalPrice,\n  onCheckout,\n  onClose\n}) {\n  _s();\n  const [selectedMethod, setSelectedMethod] = useState(\"\"); // 선택된 결제 방식\n  const [isLoggedIn, setIsLoggedIn] = useState(false); // 로그인 상태\n  const [username, setUsername] = useState(null); // 사용자 이름\n\n  useEffect(() => {\n    // 로그인된 사용자 정보를 sessionStorage에서 가져오기\n    const storedUsername = sessionStorage.getItem(\"username\");\n    const loggedIn = sessionStorage.getItem(\"isLoggedIn\");\n    if (loggedIn && storedUsername) {\n      setIsLoggedIn(true);\n      setUsername(storedUsername);\n    }\n  }, []);\n  const addMileage = async username => {\n    try {\n      const response = await fetch(\"http://localhost:5000/add_mileage\", {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          username,\n          mileage: 100\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        console.log(data.message);\n      } else {\n        console.error(data.message);\n      }\n    } catch (error) {\n      console.error(\"마일리지 적립 중 에러 발생:\", error);\n    }\n  };\n  const handlePaymentSubmit = async () => {\n    try {\n      if (selectedMethod === \"CREDITCARD\") {\n        console.log(\"카드 결제 처리\");\n        if (isLoggedIn) {\n          await addMileage(username); // 100원 마일리지 적립\n          alert(\"마일리지가 적립되었습니다.\");\n          window.location.reload(); // 페이지 새로고침\n        } else {\n          alert(\"로그인이 필요합니다.\");\n        }\n      } else if (selectedMethod === \"MOBILE\") {\n        console.log(\"모바일 결제 처리\");\n        onCheckout(totalPrice); // onCheckout 함수 호출\n        onClose(); // 모달 닫기\n      } else {\n        console.log(\"결제 방식을 선택해주세요.\");\n      }\n    } catch (error) {\n      console.error(\"결제 처리 중 에러 발생:\", error);\n    }\n  };\n  const handleSubmit = event => {\n    event.preventDefault();\n    handlePaymentSubmit();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Modal-Content\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Modal-Header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uACB0\\uC81C \\uBC29\\uC2DD \\uC120\\uD0DD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"Close\",\n        onClick: onClose,\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-options\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `payment-box ${selectedMethod === \"MOBILE\" ? \"selected\" : \"\"}`,\n        onClick: () => setSelectedMethod(\"MOBILE\"),\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: cashIcon,\n          alt: \"\\uBAA8\\uBC14\\uC77C\\uACB0\\uC81C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), \"\\uBAA8\\uBC14\\uC77C\\uACB0\\uC81C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `payment-box ${selectedMethod === \"CREDITCARD\" ? \"selected\" : \"\"}`,\n        onClick: () => setSelectedMethod(\"CREDITCARD\"),\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: creditCardIcon,\n          alt: \"\\uCE74\\uB4DC\\uACB0\\uC81C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), \"\\uCE74\\uB4DC\\uACB0\\uC81C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"total-amount\",\n      children: [\"\\uCD1D \\uACB0\\uC81C\\uAE08\\uC561 \", /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [totalPrice, \"\\uC6D0\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\uACB0\\uC81C\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(Payment, \"/Sp3QOdQg0H6ixAEeG/q6OHbTfQ=\");\n_c = Payment;\nexport default Payment;\nvar _c;\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","useState","useEffect","creditCardIcon","cashIcon","jsxDEV","_jsxDEV","Payment","totalPrice","onCheckout","onClose","_s","selectedMethod","setSelectedMethod","isLoggedIn","setIsLoggedIn","username","setUsername","storedUsername","sessionStorage","getItem","loggedIn","addMileage","response","fetch","method","headers","body","JSON","stringify","mileage","data","json","ok","console","log","message","error","handlePaymentSubmit","alert","window","location","reload","handleSubmit","event","preventDefault","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","src","alt","onSubmit","type","_c","$RefreshReg$"],"sources":["/home/sysop/capstone/src/MainMenu/Shopping/Payment.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./ShoppingCss/PaymentScreen.css\";\nimport creditCardIcon from \"../Shopping/images/credit_card.png\"; // 아이콘 경로\nimport cashIcon from \"../Shopping/images/cash.png\"; // 아이콘 경로\n\nfunction Payment({ totalPrice, onCheckout, onClose }) {\n  const [selectedMethod, setSelectedMethod] = useState(\"\"); // 선택된 결제 방식\n  const [isLoggedIn, setIsLoggedIn] = useState(false); // 로그인 상태\n  const [username, setUsername] = useState(null); // 사용자 이름\n\n  useEffect(() => {\n    // 로그인된 사용자 정보를 sessionStorage에서 가져오기\n    const storedUsername = sessionStorage.getItem(\"username\");\n    const loggedIn = sessionStorage.getItem(\"isLoggedIn\");\n\n    if (loggedIn && storedUsername) {\n      setIsLoggedIn(true);\n      setUsername(storedUsername);\n    }\n  }, []);\n\n  const addMileage = async (username) => {\n    try {\n      const response = await fetch(\"http://localhost:5000/add_mileage\", {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ username, mileage: 100 }),\n      });\n      const data = await response.json();\n      if (response.ok) {\n        console.log(data.message);\n      } else {\n        console.error(data.message);\n      }\n    } catch (error) {\n      console.error(\"마일리지 적립 중 에러 발생:\", error);\n    }\n  };\n\n  const handlePaymentSubmit = async () => {\n    try {\n      if (selectedMethod === \"CREDITCARD\") {\n        console.log(\"카드 결제 처리\");\n        if (isLoggedIn) {\n          await addMileage(username); // 100원 마일리지 적립\n          alert(\"마일리지가 적립되었습니다.\");\n          window.location.reload(); // 페이지 새로고침\n        } else {\n          alert(\"로그인이 필요합니다.\");\n        }\n      } else if (selectedMethod === \"MOBILE\") {\n        console.log(\"모바일 결제 처리\");\n        onCheckout(totalPrice); // onCheckout 함수 호출\n        onClose(); // 모달 닫기\n      } else {\n        console.log(\"결제 방식을 선택해주세요.\");\n      }\n    } catch (error) {\n      console.error(\"결제 처리 중 에러 발생:\", error);\n    }\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    handlePaymentSubmit();\n  };\n\n  return (\n    <div className=\"Modal-Content\">\n      <div className=\"Modal-Header\">\n        <h2>결제 방식 선택</h2>\n        <span className=\"Close\" onClick={onClose}>\n          &times;\n        </span>\n      </div>\n      <div className=\"payment-options\">\n        <div\n          className={`payment-box ${\n            selectedMethod === \"MOBILE\" ? \"selected\" : \"\"\n          }`}\n          onClick={() => setSelectedMethod(\"MOBILE\")}\n        >\n          <img src={cashIcon} alt=\"모바일결제\" />\n          모바일결제\n        </div>\n        <div\n          className={`payment-box ${\n            selectedMethod === \"CREDITCARD\" ? \"selected\" : \"\"\n          }`}\n          onClick={() => setSelectedMethod(\"CREDITCARD\")}\n        >\n          <img src={creditCardIcon} alt=\"카드결제\" />\n          카드결제\n        </div>\n      </div>\n      <div className=\"total-amount\">\n        총 결제금액 <span>{totalPrice}원</span>\n      </div>\n      <form onSubmit={handleSubmit}>\n        <button type=\"submit\">결제하기</button>\n      </form>\n    </div>\n  );\n}\n\nexport default Payment;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}