{"ast":null,"code":"var _jsxFileName = \"/home/sysop/capstone/src/MainMenu/Payment/Checkout.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { loadPaymentWidget, ANONYMOUS } from \"@tosspayments/payment-widget-sdk\";\nimport \"./style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst generateRandomString = () => window.btoa(Math.random()).slice(0, 20);\nconst CheckOut = ({\n  totalPrice,\n  onClose\n}) => {\n  _s();\n  const paymentWidgetRef = useRef(null);\n  const [isPaymentWidgetReady, setIsPaymentWidgetReady] = useState(false);\n  const handleClickPaymentButton = async () => {\n    try {\n      const paymentWidget = paymentWidgetRef.current;\n      if (!paymentWidget) {\n        throw new Error(\"결제 위젯이 초기화되지 않았습니다.\");\n      }\n      await paymentWidget.requestPayment({\n        orderId: generateRandomString(),\n        orderName: \"토스 티셔츠 외 2건\",\n        successUrl: window.location.origin + \"/sandbox/success\",\n        failUrl: window.location.origin + \"/sandbox/fail\"\n      });\n    } catch (error) {\n      console.error(\"결제 요청 실패:\", error);\n      alert(\"결제 수단을 선택하지 않았습니다. 결제 수단을 선택해 주세요.\");\n    }\n  };\n  useEffect(() => {\n    const initializePaymentWidget = async () => {\n      try {\n        const paymentWidget = await loadPaymentWidget(\"test_gck_docs_Ovk5rk1EwkEbP0W43n07xlzm\", ANONYMOUS);\n        paymentWidgetRef.current = paymentWidget;\n        paymentWidget.renderPaymentMethods(\"#payment-method\", {\n          value: totalPrice\n        }, {\n          variantKey: \"DEFAULT\"\n        });\n        paymentWidget.renderAgreement(\"#agreement\", {\n          variantKey: \"DEFAULT\"\n        });\n        setIsPaymentWidgetReady(true); // 결제 위젯이 초기화되었음을 설정합니다.\n      } catch (error) {\n        console.error(\"결제 위젯 초기화 실패:\", error);\n      }\n    };\n    initializePaymentWidget();\n  }, [totalPrice]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrapper w-100\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-540 w-100\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"payment-method\",\n        className: \"w-100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"agreement\",\n        className: \"w-100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-wrapper w-100\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn secondary w-100\",\n          onClick: onClose,\n          children: \"\\uCDE8\\uC18C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn primary w-100\",\n          onClick: handleClickPaymentButton,\n          disabled: !isPaymentWidgetReady // 결제 위젯이 준비되지 않은 경우 버튼 비활성화\n          ,\n          children: [totalPrice.toLocaleString(), \"\\uC6D0 \\uACB0\\uC81C\\uD558\\uAE30\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(CheckOut, \"nDFtDMUezPgsSADS5RsfqRCwPsw=\");\n_c = CheckOut;\nexport default CheckOut;\nvar _c;\n$RefreshReg$(_c, \"CheckOut\");","map":{"version":3,"names":["React","useEffect","useRef","useState","loadPaymentWidget","ANONYMOUS","jsxDEV","_jsxDEV","generateRandomString","window","btoa","Math","random","slice","CheckOut","totalPrice","onClose","_s","paymentWidgetRef","isPaymentWidgetReady","setIsPaymentWidgetReady","handleClickPaymentButton","paymentWidget","current","Error","requestPayment","orderId","orderName","successUrl","location","origin","failUrl","error","console","alert","initializePaymentWidget","renderPaymentMethods","value","variantKey","renderAgreement","className","children","id","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","toLocaleString","_c","$RefreshReg$"],"sources":["/home/sysop/capstone/src/MainMenu/Payment/Checkout.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { loadPaymentWidget, ANONYMOUS } from \"@tosspayments/payment-widget-sdk\";\nimport \"./style.css\";\n\nconst generateRandomString = () => window.btoa(Math.random()).slice(0, 20);\n\nconst CheckOut = ({ totalPrice, onClose }) => {\n  const paymentWidgetRef = useRef(null);\n  const [isPaymentWidgetReady, setIsPaymentWidgetReady] = useState(false);\n\n  const handleClickPaymentButton = async () => {\n    try {\n      const paymentWidget = paymentWidgetRef.current;\n      if (!paymentWidget) {\n        throw new Error(\"결제 위젯이 초기화되지 않았습니다.\");\n      }\n      await paymentWidget.requestPayment({\n        orderId: generateRandomString(),\n        orderName: \"토스 티셔츠 외 2건\",\n        successUrl: window.location.origin + \"/sandbox/success\",\n        failUrl: window.location.origin + \"/sandbox/fail\",\n      });\n    } catch (error) {\n      console.error(\"결제 요청 실패:\", error);\n      alert(\"결제 수단을 선택하지 않았습니다. 결제 수단을 선택해 주세요.\");\n    }\n  };\n\n  useEffect(() => {\n    const initializePaymentWidget = async () => {\n      try {\n        const paymentWidget = await loadPaymentWidget(\n          \"test_gck_docs_Ovk5rk1EwkEbP0W43n07xlzm\",\n          ANONYMOUS\n        );\n\n        paymentWidgetRef.current = paymentWidget;\n\n        paymentWidget.renderPaymentMethods(\n          \"#payment-method\",\n          { value: totalPrice },\n          { variantKey: \"DEFAULT\" }\n        );\n\n        paymentWidget.renderAgreement(\"#agreement\", { variantKey: \"DEFAULT\" });\n\n        setIsPaymentWidgetReady(true); // 결제 위젯이 초기화되었음을 설정합니다.\n      } catch (error) {\n        console.error(\"결제 위젯 초기화 실패:\", error);\n      }\n    };\n\n    initializePaymentWidget();\n  }, [totalPrice]);\n\n  return (\n    <div className=\"wrapper w-100\">\n      <div className=\"max-w-540 w-100\">\n        <div id=\"payment-method\" className=\"w-100\" />\n        <div id=\"agreement\" className=\"w-100\" />\n        <div className=\"btn-wrapper w-100\">\n          <button className=\"btn secondary w-100\" onClick={onClose}>\n            취소\n          </button>\n          <button\n            className=\"btn primary w-100\"\n            onClick={handleClickPaymentButton}\n            disabled={!isPaymentWidgetReady} // 결제 위젯이 준비되지 않은 경우 버튼 비활성화\n          >\n            {totalPrice.toLocaleString()}원 결제하기\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CheckOut;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}